# Demo 13: æ‘‡å¤´æ™ƒè„‘åŠ¨ä½œæ¼”ç¤º

ä½¿ç”¨ Reachy Mini SDK åœ¨æœºå™¨äººæœ¬ä½“ä¸Šè¿è¡Œï¼Œå±•ç¤ºå¤šç§å¤´éƒ¨åŠ¨ä½œç»„åˆã€‚

---

## è¿è¡Œå¹³å°

| å¹³å° | æ”¯æŒæƒ…å†µ |
|------|----------|
| PC | âŒ ä¸é€‚ç”¨ |
| Reachy Mini | âœ… æ”¯æŒ |

> æ­¤ demo éœ€è¦åœ¨ Reachy Mini æœºå™¨äººæœ¬ä½“ä¸Šè¿è¡Œï¼Œä½¿ç”¨æœ¬åœ° SDK æ§åˆ¶ã€‚

---

## åŠŸèƒ½ç‰¹æ€§

å±•ç¤ºå®Œæ•´çš„å¤´éƒ¨å’Œåº•åº§åŠ¨ä½œåºåˆ—ï¼š
1. **åº•åº§è½¬åŠ¨** - é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆè½¬åŠ¨ï¼ˆbody_yaw æ§åˆ¶åº•åº§æ—‹è½¬ï¼‰
2. **å‰åç§»åŠ¨** - å‘å‰ç§»åŠ¨/å‘åç§»åŠ¨ï¼ˆhead x-axis æ§åˆ¶å¤´éƒ¨å‰åç§»åŠ¨ï¼‰
3. **å·¦å³ç§»åŠ¨** - å‘å·¦ç§»/å‘å³ç§»ï¼ˆhead y-axis æ§åˆ¶å¤´éƒ¨å·¦å³ç§»åŠ¨ï¼‰
4. **ä¸Šä¸‹ç§»åŠ¨** - å‘ä¸Šç§»/å‘ä¸‹ç§»ï¼ˆhead z-axis æ§åˆ¶å¤´éƒ¨ä¸Šä¸‹ç§»åŠ¨ï¼‰

æ¯ä¸ªåŠ¨ä½œéƒ½ä¼šï¼š
- æ‰§è¡Œæ­£å‘åŠ¨ä½œ
- å›åˆ°åˆå§‹ä½ç½®
- æ‰§è¡Œåå‘åŠ¨ä½œ
- å›åˆ°åˆå§‹ä½ç½®

---

## å‰ç½®æ¡ä»¶

### 1. ç³»ç»Ÿè¦æ±‚

- **è¿è¡Œå¹³å°**: Reachy Mini æœºå™¨äººæœ¬ä½“
- **Python**: 3.7+
- **SDK**: reachy_miniï¼ˆé€šå¸¸å·²é¢„è£…åœ¨ Reachy Mini ä¸Šï¼‰

### 2. Python ä¾èµ–

```bash
# reachy_mini é€šå¸¸å·²é¢„è£…åœ¨ Reachy Mini ä¸Š
# å¦‚éœ€æ‰‹åŠ¨å®‰è£…:
pip install reachy-mini

# numpy é€šå¸¸ä¹Ÿå·²é¢„è£…
pip install numpy
```

---

## ä½¿ç”¨æ–¹æ³•

### 1. å°†ä»£ç ä¼ è¾“åˆ° Reachy Mini

ç”±äºæ­¤ demo éœ€è¦åœ¨æœºå™¨äººæœ¬ä½“ä¸Šè¿è¡Œï¼Œéœ€è¦å…ˆä¼ è¾“ä»£ç ï¼š

```bash
# æ–¹æ³• 1: ä½¿ç”¨ scp (ä» PC ä¼ è¾“)
scp demos/13_head_look_around/look_around.py reachy@10.42.0.75:/home/reachy/

# æ–¹æ³• 2: ä½¿ç”¨ USB å­˜å‚¨è®¾å¤‡
# å°† look_around.py å¤åˆ¶åˆ° USBï¼Œæ’å…¥ Reachy Miniï¼Œç„¶åå¤åˆ¶åˆ°æœºå™¨äºº

# æ–¹æ³• 3: ç›´æ¥åœ¨ Reachy Mini ä¸Šåˆ›å»ºæ–‡ä»¶
# SSH è¿æ¥åˆ° Reachy Miniï¼Œä½¿ç”¨ nano/vim ç¼–è¾‘å™¨åˆ›å»ºæ–‡ä»¶
ssh reachy@10.42.0.75
```

### 2. åœ¨ Reachy Mini ä¸Šè¿è¡Œè„šæœ¬

```bash
# SSH è¿æ¥åˆ° Reachy Mini
ssh reachy@10.42.0.75

# è¿›å…¥è„šæœ¬æ‰€åœ¨ç›®å½•
cd /home/reachy

# è¿è¡Œè„šæœ¬
python3 look_around.py
```

---

## è„šæœ¬è¯´æ˜

### åŠ¨ä½œå‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `count` | æ¯ä¸ªåŠ¨ä½œçš„é‡å¤æ¬¡æ•° | 2 |

### åŠ¨ä½œåºåˆ—

```
1ï¸âƒ£  åº•åº§è½¬åŠ¨ (body_yaw):
   - é¡ºæ—¶é’ˆè½¬åŠ¨ 45Â° â†’ å¤ä½ â†’ é€†æ—¶é’ˆè½¬åŠ¨ 45Â° â†’ å¤ä½

2ï¸âƒ£  å‰åç§»åŠ¨åŠ¨ä½œ (head x-axis):
   - å‰ç§»åŠ¨ 20mm (x=+20) â†’ å¤ä½ â†’ åç§»åŠ¨ 20mm (x=-20) â†’ å¤ä½

3ï¸âƒ£  å·¦å³ç§»åŠ¨åŠ¨ä½œ (head y-axis):
   - å‘å·¦ç§» 25mm (y=+25) â†’ å¤ä½ â†’ å‘å³ç§» 25mm (y=-25) â†’ å¤ä½

4ï¸âƒ£  ä¸Šä¸‹ç§»åŠ¨åŠ¨ä½œ (head z-axis):
   - å‘ä¸Šç§» 20mm (z=+20) â†’ å¤ä½ â†’ å‘ä¸‹ç§» 20mm (z=-20) â†’ å¤ä½
```

### å®‰å…¨é™åˆ¶

SDK ä¼šè‡ªåŠ¨é™åˆ¶ä»¥ä¸‹èŒƒå›´ï¼Œé˜²æ­¢è‡ªç¢°æ’å’ŒæŸåï¼š

| å…³èŠ‚/è½´ | é™åˆ¶èŒƒå›´ | æœ¬ demo ä½¿ç”¨ |
|--------|----------|-------------|
| Head Pitch/Roll | [-40Â°, +40Â°] | x: Â±20mm (å‰å) |
| Head Yaw | [-180Â°, +180Â°] | y: Â±25mm (å·¦å³) |
| Body Yaw | [-160Â°, +160Â°] | Â±45Â° |
| Yaw Delta | æœ€å¤§ 65Â° | - |
| Head Z-axis | SDK é™åˆ¶ | z: Â±20mm (ä¸Šä¸‹) |

### ä¸»è¦å‡½æ•°

| å‡½æ•° | è¯´æ˜ |
|------|------|
| `look_around_action(count)` | æ‰§è¡Œæ‘‡å¤´æ™ƒè„‘åŠ¨ä½œåºåˆ— |

---

## Reachy Mini SDK ä½¿ç”¨

### åˆå§‹åŒ–æœºå™¨äºº

```python
from reachy_mini import ReachyMini
from reachy_mini.utils import create_head_pose
import numpy as np

# ä½¿ç”¨ with è¯­å¥è‡ªåŠ¨ç®¡ç†è¿æ¥
with ReachyMini() as mini:
    # æœºå™¨äººå·²è¿æ¥ï¼Œå¯ä»¥æ‰§è¡Œæ§åˆ¶
    pass
```

### è¿åŠ¨æ§åˆ¶æ–¹æ³•

SDK ä½¿ç”¨ `goto_target` æ–¹æ³•è¿›è¡Œå¹³æ»‘è¿åŠ¨æ§åˆ¶ï¼š

```python
# æ§åˆ¶åº•åº§æ—‹è½¬ï¼ˆbody_yawï¼Œå•ä½ï¼šå¼§åº¦ï¼‰
mini.goto_target(
    body_yaw=np.deg2rad(30),    # å°†åº¦æ•°è½¬æ¢ä¸ºå¼§åº¦
    duration=1.0,               # è¿åŠ¨æ—¶é—´ï¼ˆç§’ï¼‰
    method="minjerk"            # æ’å€¼æ¨¡å¼
)

# æ§åˆ¶å¤´éƒ¨è¿åŠ¨ï¼ˆä½¿ç”¨ç¬›å¡å°”åæ ‡ï¼Œå•ä½ï¼šæ¯«ç±³ï¼‰
mini.goto_target(
    head=create_head_pose(
        x=10,   # å‰åç§»åŠ¨ï¼ˆmmï¼‰ï¼Œæ­£å€¼å‘å‰ï¼Œè´Ÿå€¼å‘å
        y=0,    # å·¦å³ç§»åŠ¨ï¼ˆmmï¼‰ï¼Œæ­£å€¼å‘å·¦ï¼Œè´Ÿå€¼å‘å³
        z=10,   # ä¸Šä¸‹ç§»åŠ¨ï¼ˆmmï¼‰ï¼Œæ­£å€¼å‘ä¸Šï¼Œè´Ÿå€¼å‘ä¸‹
        mm=True
    ),
    duration=0.6,
    method="minjerk"
)

# åŒæ—¶æ§åˆ¶å¤šä¸ªå…³èŠ‚
mini.goto_target(
    body_yaw=np.deg2rad(15),
    head=create_head_pose(z=10, mm=True),
    duration=1.0,
    method="minjerk"
)
```

### å¤´éƒ¨åæ ‡ç³»è¯´æ˜

| å‚æ•° | è¯´æ˜ | æ–¹å‘ |
|------|------|------|
| `x` | å‰åç§»åŠ¨ | æ­£å€¼å‘å‰ï¼Œè´Ÿå€¼å‘å |
| `y` | å·¦å³ç§»åŠ¨ | æ­£å€¼å‘å·¦ï¼Œè´Ÿå€¼å‘å³ |
| `z` | ä¸Šä¸‹ç§»åŠ¨ | æ­£å€¼å‘ä¸Šï¼Œè´Ÿå€¼å‘ä¸‹ |

### æ’å€¼æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ |
|------|------|
| `minjerk` | æœ€å°åŠ åŠ é€Ÿåº¦ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰ |
| `linear` | çº¿æ€§æ’å€¼ |
| `ease` | ç¼“åŠ¨æ’å€¼ |
| `cartoon` | å¡é€šé£æ ¼æ’å€¼ |

---

## é¢„æœŸè¾“å‡º

```
============================================================
ğŸ¤– Reachy Mini æ‘‡å¤´æ™ƒè„‘æ¼”ç¤º
============================================================

åŠ¨ä½œåºåˆ—å°†é‡å¤ 2 æ¬¡:
  1ï¸âƒ£  é¡ºæ—¶é’ˆè½¬åŠ¨ -> å¤ä½ -> é€†æ—¶é’ˆè½¬åŠ¨ -> å¤ä½
  2ï¸âƒ£  å‰ç§»åŠ¨ -> å¤ä½ -> åç§»åŠ¨ -> å¤ä½
  3ï¸âƒ£  å‘å·¦ç§» -> å¤ä½ -> å‘å³ç§» -> å¤ä½
  4ï¸âƒ£  å‘ä¸Šç§» -> å¤ä½ -> å‘ä¸‹ç§» -> å¤ä½
============================================================

ğŸ”Œ æ­£åœ¨è¿æ¥ Reachy Mini...
âœ… è¿æ¥æˆåŠŸ!

âš¡ å¯ç”¨æ‰€æœ‰ç”µæœº...

============================================================
ğŸ”„ ç¬¬ 1/2 è½®åŠ¨ä½œ
============================================================

1ï¸âƒ£  åº•åº§è½¬åŠ¨åŠ¨ä½œ:
   é¡ºæ—¶é’ˆè½¬åŠ¨ 45Â° -> å¤ä½ -> é€†æ—¶é’ˆè½¬åŠ¨ 45Â° -> å¤ä½
   â†» é¡ºæ—¶é’ˆè½¬åŠ¨ 45Â°...
   â†º å›åˆ°åˆå§‹ä½ç½®...
   â†º é€†æ—¶é’ˆè½¬åŠ¨ 45Â°...
   â†º å›åˆ°åˆå§‹ä½ç½®...

2ï¸âƒ£  å‰åç§»åŠ¨åŠ¨ä½œ:
   å‰ç§»åŠ¨ -> å¤ä½ -> åç§»åŠ¨ -> å¤ä½
   â¬†ï¸  å‰ç§»åŠ¨ 20mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...
   â¬‡ï¸  åç§»åŠ¨ 20mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...

3ï¸âƒ£  å·¦å³ç§»åŠ¨åŠ¨ä½œ:
   å‘å·¦ç§» -> å¤ä½ -> å‘å³ç§» -> å¤ä½
   â¬…ï¸  å‘å·¦ç§» 25mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...
   â¡ï¸  å‘å³ç§» 25mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...

4ï¸âƒ£  ä¸Šä¸‹ç§»åŠ¨åŠ¨ä½œ:
   å‘ä¸Šç§» -> å¤ä½ -> å‘ä¸‹ç§» -> å¤ä½
   â¬†ï¸  å‘ä¸Šç§» 20mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...
   â¬‡ï¸  å‘ä¸‹ç§» 20mm...
   â†º å›åˆ°åˆå§‹ä½ç½®...

============================================================
ğŸ‰ æ‰€æœ‰åŠ¨ä½œå®Œæˆ!
============================================================
ğŸ”„ å›åˆ°åˆå§‹ä½ç½®...
âš¡ å…³é—­ç”µæœº...

============================================================
æ¼”ç¤ºç»“æŸ!
============================================================
```

---

## è‡ªå®šä¹‰åŠ¨ä½œ

å¦‚éœ€ä¿®æ”¹åŠ¨ä½œå‚æ•°ï¼Œå¯ä»¥ç¼–è¾‘ `look_around_action` å‡½æ•°ä¸­çš„å‚æ•°ï¼š

```python
# ä¿®æ”¹åº•åº§è½¬åŠ¨è§’åº¦ï¼ˆåº¦æ•°è½¬æ¢ä¸ºå¼§åº¦ï¼‰
mini.goto_target(
    body_yaw=np.deg2rad(45),    # æ”¹ä¸º 45 åº¦
    duration=1.0,
    method="minjerk"
)

# ä¿®æ”¹å¤´éƒ¨è¿åŠ¨å¹…åº¦ï¼ˆæ¯«ç±³ï¼‰
mini.goto_target(
    head=create_head_pose(z=15, mm=True),  # æ”¹ä¸º 15mm
    duration=0.6,
    method="minjerk"
)

# ä¿®æ”¹è¿åŠ¨æ—¶é—´
mini.goto_target(
    body_yaw=np.deg2rad(30),
    duration=0.8,  # æ”¹ä¸º 0.8 ç§’
    method="minjerk"
)

# ä¿®æ”¹é‡å¤æ¬¡æ•°
look_around_action(count=5)  # é‡å¤ 5 æ¬¡
```

---

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: æ¨¡å—å¯¼å…¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `ModuleNotFoundError: No module named 'reachy_mini'`

**è§£å†³**:
```bash
pip install reachy-mini
```

### é—®é¢˜ 2: è¿æ¥å¤±è´¥

**åŸå› **: æ— æ³•è¿æ¥åˆ° Reachy Mini

**è§£å†³**:
- ç¡®è®¤æœºå™¨äººå·²å¼€æœº
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆå¦‚ä½¿ç”¨ç½‘ç»œæ¨¡å¼ï¼‰
- æœ¬åœ°è¿è¡Œæ—¶ï¼ŒSDK ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ localhost è¿æ¥

### é—®é¢˜ 3: è¿åŠ¨ä¸æµç•…

**åŸå› **: duration å‚æ•°è®¾ç½®è¿‡å°

**è§£å†³**: å¢åŠ è¿åŠ¨æ—¶é—´
```python
mini.goto_target(
    head=create_head_pose(x=10, mm=True),
    duration=1.5,  # å¢åŠ åˆ° 1.5 ç§’
    method="minjerk"
)
```

---

## ä¸å…¶ä»– Demo çš„åŒºåˆ«

| Demo | è¿è¡Œå¹³å° | æ§åˆ¶æ–¹å¼ | é€‚ç”¨åœºæ™¯ |
|------|----------|----------|----------|
| [Demo 02-04](../02_basic_body_rotation/) | PC | REST API | è¿œç¨‹æ§åˆ¶ |
| **Demo 13** | Reachy Mini | æœ¬åœ° SDK | æœ¬åœ°è‡ªåŠ¨åŒ–æ§åˆ¶ |

---

## ç›¸å…³æ–‡æ¡£

- [Reachy Mini SDK å®˜æ–¹æ–‡æ¡£](https://github.com/pollen-robotics/reachy-minisdk)
- [API å‚è€ƒæ–‡æ¡£](../../docs/API_REFERENCE_CN.md)
- [ä½¿ç”¨æŒ‡å—](../../docs/USAGE_GUIDE_CN.md)

---

## è®¸å¯è¯

MIT License
